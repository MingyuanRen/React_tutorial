
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>
<body>
    
</body>
<script>
    //Create and define a new Promise object
    const p = new Promise((resolve,reject)=>{
        //perform asynchronous operations
            setTimeout(()=>{
                //If the current event is an even number it means success, otherwise it means failure
                const time = Date.now();
                console.log(time)
                if(time %2 === 0){
                    //successful call
                    resolve("success");
                }else{
                    //failed call
                    reject("fail");
                }
            },1000);
    });
    

    setTimeout(()=>{
        p.then(
            value =>{  //Receive the data of the successful value
                console.log(value);
            },
            reason =>{//Receive the data of the failed reason
                console.log(reason);
            }
        )
    },2000)
    

  
    setHui=()=>{
        console.log("this is set")
    }
  
    
    setHui(2);

    setHui =(a,getHui,setHui)=>{
        
        setTimeout(()=>{
            if(a === 0){
                getHui();
            }else(
                setHui()    
            )
        },1000)
    };

    async function show(){
        return "sss"
    };
    const s = show();
    console.log(s);



    const newSet = new Promise((resolve,reject)=>{
        setTimeout(()=>{
            console.log("success");
            resolve();
        },1000)
    }).then(
        value =>{
            throw 5;
        }
    ).catch((reason) =>{
        console.log("catch"+reason)
    })

    console.log(newSet," zheg ");


    //Promise.all([p,p1,p2])

    // const p1 = new Promise((resolve,reject)=>{
    //     resolve();
    // })
    // const p2 = new Promise((resolve,reject)=>{
    //     reject();
    // })
    // Promise.reject()

    f1 = () =>{
        return new Promise((resolve,reject)=>{
            // resolve(1);
            reject("error")
        })
    }

    async function test(){
        try{
           const p =  await f1();
           console.log(p)
        }catch(error){
            console.error(error)
        }
    }
    test();

    async function test2(){
        return 1;
    }
    console.log(test2());

    async function test3(){
        return new Promise((resolve,reject)=>{
            resolve("test3")
        });
    }



   test3().then(
       value =>{
            console.log("This is a successful value");
       },
       reason =>{
           console.log("reason")
        }
   )
    

   history.back();
   history.forward();
   history.listen(()=>{
       console.log("Monitor path changes")
   });
   history.replaceState


</script>
</html>